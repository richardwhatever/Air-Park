<!-- index.html -->
<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="background-keyword" id="background-keyword" content="" />
<title id="page-title">Domain for Sale</title>
<style>
  body {
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    margin: 0;
    padding: 2rem;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
  }

  body::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    z-index: 1;
  }

  .card {
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    max-width: 720px;
    width: 100%;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    position: relative;
    z-index: 2;
  }

  h1 {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  label {
    display: block;
    margin: .5rem 0 .25rem
  }

  input,
  textarea,
  button {
    width: 100%;
    padding: .75rem;
    border: 1px solid #d1d5db;
    border-radius: 10px
  }

  button {
    cursor: pointer;
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1rem;
    transition: all 0.2s ease;
    margin-top: 16px;
  }

  button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  }

  .muted {
    color: #6b7280;
    font-size: .9rem
  }

  .form-container {
    width: 80%;
    margin: 0 auto;
  }

  .form-heading {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    text-align: center;
  }

  .contact-form {
    display: none;
  }

  .get-in-touch-btn {
    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 10px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    margin: 2rem auto;
    display: block;
  }

  .get-in-touch-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  }

  #google-form {
    border: none;
    width: 100%;
    height: 600px;
    margin: 0;
    padding: 0;
  }

  #price {
    text-align: center;
    font-size: 1.8rem;
    font-weight: 700;
    padding: 1.5rem 0;
    margin: 1rem 0;
  }

  .pricing-info {
    text-align: center;
    margin: 1.5rem 0;
    line-height: 1.6;
  }

  .payment-methods {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
    text-align: center;
    font-weight: 600;
  }

  .domain-details {
    margin: 2rem 0;
  }

  .domain-details h3 {
    font-size: 1.2rem;
    margin-bottom: 0.5rem;
    color: #374151;
  }

  .domain-details ul {
    margin: 0.5rem 0 1.5rem 0;
    padding-left: 1.5rem;
  }

  .domain-details li {
    margin-bottom: 0.25rem;
    line-height: 1.4;
  }

  #seo-keywords-list {
    column-count: 2;
    column-gap: 2rem;
    list-style-position: inside;
  }

  #seo-keywords-list li {
    break-inside: avoid;
    margin-bottom: 0.5rem;
  }

  .pricing-note {
    color: #6b7280;
    font-size: 0.9rem;
    font-style: italic;
    margin-top: 0.5rem;
  }

  .search-term {
    color: #9ca3af;
    font-size: 0.75rem;
    text-align: center;
    margin-top: 1rem;
    font-style: italic;
  }

  .domain-group {
    background: rgba(67, 201, 93, 0.05);
    border: 1px solid rgba(59, 130, 246, 0.2);
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
  }

  .domain-group h3 {
    color: #3b82f6;
    margin-bottom: 0.5rem;
  }

  .domain-group p {
    color: #6b7280;
    font-size: 0.9rem;
    margin-bottom: 0.5rem;
  }

  .domain-group ul {
    margin: 0;
    padding-left: 1.5rem;
  }

  .domain-group li {
    color: #374151;
    font-weight: 500;
  }

  /* Dynamic background image will be set via JavaScript */
</style>
<div class="card">
  <h1 id="domain"></h1>
  <p id="price"></p>
  <p id="pricing-note" class="pricing-note"></p>

  <div class="pricing-info">
    <p>We are selling direct, with no brokers involved on our side. Secure escrow available (Escrow.com).</p>
    <div class="payment-methods">
      We accept payment in £, $, € and BTC
    </div>
  </div>
  <div id="domain-group-section" style="display: none;" class="domain-group">
    <h3>Matching Domain Set</h3>
    <p>Own the full set — secure matching domains across multiple TLDs to strengthen your brand and prevent
      competitors from grabbing them.</p>
    <ul id="domain-group-list"></ul>
  </div>
  <div class="domain-details">
    <div id="use-cases-section" style="display: none;">
      <h3>Use Cases</h3>
      <ul id="use-cases-list"></ul>
    </div>
    <div id="seo-keywords-section" style="display: none;">
      <h3>Other concepts</h3>
      <ul id="seo-keywords-list"></ul>
    </div>

  </div>

  <button class="get-in-touch-btn" onclick="showContactForm()">Get in Touch</button>
  <div class="form-container contact-form" id="contact-form">
    <div class="form-heading">Get in touch</div>
    <iframe id="google-form" frameborder="0" marginheight="0" marginwidth="0" style="display: none;">
    </iframe>
  </div>
  <div class="search-term" id="search-term"></div>
</div>
<script>
  function showContactForm() {
    document.getElementById('contact-form').style.display = 'block';
    document.querySelector('.get-in-touch-btn').style.display = 'none';

    // Hide the use cases and other concepts sections
    const useCasesSection = document.getElementById('use-cases-section');
    const seoKeywordsSection = document.getElementById('seo-keywords-section');

    if (useCasesSection) {
      useCasesSection.style.display = 'none';
    }
    if (seoKeywordsSection) {
      seoKeywordsSection.style.display = 'none';
    }

    // Set up Google Form with domain pre-filled
    const host = location.hostname.replace(/^www\./, '').toLowerCase();
    const googleFormUrl = `https://docs.google.com/forms/d/e/1FAIpQLSd4d_kMzOaxSgy3owOLFO_w9uDjkoqAkBOYPAb9aMeoBclTDQ/viewform?embedded=true&entry.1001470510=${encodeURIComponent(host)}`;
    const googleForm = document.getElementById('google-form');
    googleForm.src = googleFormUrl;
    googleForm.style.display = 'block';
  }

  (async function () {
    const host = location.hostname.replace(/^www\./, '').toLowerCase();
    document.getElementById('domain').textContent = host;

    // Update page title
    document.getElementById('page-title').textContent = `${host} - domain for sale`;

    // Set background image based on randomly selected SEO keyword
    async function setBackgroundImage(rec) {
      let searchTerm = 'technology'; // default fallback
      let source = 'default';

      if (rec && rec['seo-keywords']) {
        const seoKeywords = rec['seo-keywords'].split(',').map(keyword => keyword.trim());
        // Randomly select one of the SEO keywords
        searchTerm = seoKeywords[Math.floor(Math.random() * seoKeywords.length)];
        source = 'seo-keywords';
      } else if (rec) {
        // If we have a record but no SEO keywords, try domain name
        const domainKeywords = ['architecture', 'angel', 'investor', 'funding', 'startup', 'business'];
        searchTerm = domainKeywords[Math.floor(Math.random() * domainKeywords.length)];
        source = 'domain-fallback';
      } else {
        // No record found, use generic keywords
        const genericKeywords = ['tech', 'business', 'creative', 'design', 'startup', 'digital'];
        searchTerm = genericKeywords[Math.floor(Math.random() * genericKeywords.length)];
        source = 'generic-fallback';
      }

      // Set the meta tag with the chosen keyword
      document.getElementById('background-keyword').setAttribute('content', searchTerm);

      // Display the search term in the content box with source info
      document.getElementById('search-term').textContent = `Background: ${searchTerm} (${source})`;

      try {
        // Use Unsplash API to search for images - fetch up to 10 results
        const response = await fetch(`https://api.unsplash.com/search/photos?query=${encodeURIComponent(searchTerm)}&orientation=landscape&per_page=10`, {
          headers: {
            'Authorization': 'Client-ID WUgLZ19SoxRr0fofLnh2MO-rMyngoSmmipGXScofcjI'
          }
        });

        if (response.ok) {
          const data = await response.json();
          if (data.results && data.results.length > 0) {
            // Randomly select from the available results (1-10)
            const randomIndex = Math.floor(Math.random() * Math.min(data.results.length, 10));
            const imageUrl = data.results[randomIndex].urls.regular;
            document.body.style.backgroundImage = `url(${imageUrl})`;
            return;
          }
        }
      } catch (error) {
        console.log('Failed to fetch image from Unsplash:', error);
      }

      // Fallback to a default image if API fails
      document.body.style.backgroundImage = 'url(https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1920&h=1080&fit=crop)';
    }

    const res = await fetch('/data/domains.json', { cache: 'no-store' });
    const data = await res.json();

    const rec = data[host];
    const priceEl = document.getElementById('price');
    const pricingNoteEl = document.getElementById('pricing-note');

    console.log('Current host:', host);
    console.log('Record found:', rec);

    // Set background image based on randomly selected SEO keyword
    await setBackgroundImage(rec);

    if (rec && rec.status !== 'Sold') {
      if (rec.price) {
        priceEl.textContent = `Buy-it-now: ${rec.price}`;
      } else {
        priceEl.textContent = 'Open to offers';
      }

      // Display pricing note if it exists and is not empty
      if (rec.note && rec.note.trim() !== '') {
        pricingNoteEl.textContent = rec.note;
      }

      if (rec.bin_url) {
        const a = document.createElement('a');
        a.href = rec.bin_url;
        a.textContent = 'Buy now';
        a.style.display = 'inline-block';
        a.style.marginTop = '8px';
        priceEl.appendChild(document.createElement('br'));
        priceEl.appendChild(a);
      }
    } else {
      priceEl.textContent = 'Open to offers';
    }

    // Display use cases if available
    if (rec && rec['use-cases']) {
      console.log('Found use cases:', rec['use-cases']);
      const useCasesSection = document.getElementById('use-cases-section');
      const useCasesList = document.getElementById('use-cases-list');
      const useCases = rec['use-cases'].split(';').map(uc => uc.trim());

      useCases.forEach(useCase => {
        const li = document.createElement('li');
        li.textContent = useCase;
        useCasesList.appendChild(li);
      });

      useCasesSection.style.display = 'block';
      console.log('Use cases section displayed');
    } else {
      console.log('No use cases found or no record');
    }

    // Display SEO keywords if available
    if (rec && rec['seo-keywords']) {
      console.log('Found SEO keywords:', rec['seo-keywords']);
      const seoKeywordsSection = document.getElementById('seo-keywords-section');
      const seoKeywordsList = document.getElementById('seo-keywords-list');
      const seoKeywords = rec['seo-keywords'].split(',').map(keyword => keyword.trim());

      seoKeywords.forEach(keyword => {
        const li = document.createElement('li');
        li.textContent = keyword;
        seoKeywordsList.appendChild(li);
      });

      seoKeywordsSection.style.display = 'block';
      console.log('SEO keywords section displayed');
    } else {
      console.log('No SEO keywords found or no record');
    }

    // Display domain group if available
    if (rec && rec['domain-group']) {
      const domainGroupSection = document.getElementById('domain-group-section');
      const domainGroupList = document.getElementById('domain-group-list');
      const currentGroup = rec['domain-group'];

      // Find all other domains with the same domain-group value
      const groupDomains = [];
      for (const [domainName, domainData] of Object.entries(data)) {
        if (domainName !== host && domainData['domain-group'] === currentGroup) {
          groupDomains.push(domainName);
        }
      }

      if (groupDomains.length > 0) {
        groupDomains.forEach(domain => {
          const li = document.createElement('li');
          const link = document.createElement('a');
          link.href = `http://${domain}`;
          link.textContent = domain;
          link.target = '_blank';
          link.style.color = '#3b82f6';
          link.style.textDecoration = 'none';
          link.style.fontWeight = '500';
          link.addEventListener('mouseenter', () => {
            link.style.textDecoration = 'underline';
          });
          link.addEventListener('mouseleave', () => {
            link.style.textDecoration = 'none';
          });
          li.appendChild(link);
          domainGroupList.appendChild(li);
        });

        domainGroupSection.style.display = 'block';
      }
    }
  })();
</script>

</html>